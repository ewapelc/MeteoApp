<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Interactive Map</title>
        <!--Leaflet CSS-->
         <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
     integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
     crossorigin=""/>

        <!--Leaflet JS-->
        <!-- Make sure you put this AFTER Leaflet's CSS -->
 <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
     integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
     crossorigin=""></script>

        <!--Set map height-->
        <style>
            #mapid { height: 700px; }
        </style>
    </head>
<body>


<div style="height: 30px;">
    <form method="post">
        {% csrf_token %}
        <label for="country">Select country</label>
        <select id="country" name="country">
            {% if countries %}
                {% for country in countries %}
                    <option value="{{ country.id }}">{{ country.name }}</option>
                {% endfor %}
            {% endif %}
        </select>
        <input type="submit" value="Submit">
    </form>
</div>


<h2>
   {% if my_country %}
        <p>{{ my_country.name }}</p>
<!--        <p>is set</p>-->
    {% endif %}
</h2>


<!--    {% if stations %}-->
<!--    <ul>-->
<!--        {% for station in stations %}-->
<!--            <li>-->
<!--                {{ station.latitude }}, {{ station.longitude }}-->
<!--            </li>-->
<!--        {% endfor %}-->
<!--    </ul>-->
<!--    {% endif %}-->
    <!--map div-->
    <div id="mapid"></div>

    <!--map js-->
    <script>
        var map = L.map('mapid').setView(["{{ my_country.lat }}", "{{ my_country.lon }}"], 3);

<!--51.919438, 19.145136-->


        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        L.marker(["{{ my_country.lat }}", "{{ my_country.lon }}"]).addTo(map)
            .bindPopup("{{ my_country.name }}")
            .openPopup();

        // for each location
        {% for station in stations %}-->
        var circle = L.circle([{{ station.latitude }}, {{ station.longitude }}], {
            color: 'red',
            fillColor: '#f03',
            fillOpacity: 0.5,
            radius: 5
        }).addTo(map);
        {% endfor %}
    </script>
</body>
</html>
